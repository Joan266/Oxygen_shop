let modalOverlay=document.getElementById("modal-overlay"),modalCloseButton=document.querySelector(".modal__close-button__img"),modalForm=document.getElementById("modalForm"),modalFormNameInput=document.getElementById("modalFormName"),modalFormEmailInput=document.getElementById("modalFormEmail"),modalFormCheckbox=document.getElementById("modalFormCheckbox"),contactForm=document.getElementById("contactForm"),contactFormNameInput=document.getElementById("contactFormName"),contactFormEmailInput=document.getElementById("contactFormEmail"),contactFormCheckbox=document.getElementById("contactFormCheckbox"),isModalClosed=!!localStorage.getItem("modalClosed"),isSubmitting=(document.addEventListener("keydown",handleEscapeKey),modalCloseButton.addEventListener("click",closeModal),modalOverlay.addEventListener("click",handleClickOutside),modalForm.addEventListener("submit",async function(e){e.preventDefault(),await subscribe(modalForm,modalFormNameInput,modalFormEmailInput,modalFormCheckbox)&&closeModal()}),document.addEventListener("scroll",function e(){var t=document.documentElement.scrollHeight-window.innerHeight,o=document.documentElement.scrollTop;35<Math.floor(o/t*100)&&(showModal(),document.removeEventListener("scroll",e))}),contactForm.addEventListener("submit",async function(e){e.preventDefault(),await subscribe(contactForm,contactFormNameInput,contactFormEmailInput,contactFormCheckbox)}),!1);async function subscribe(e,t,o,a){if(!isSubmitting){isSubmitting=!0;try{var s;return!!validateForm(t,o,a)&&(s={name:t.value,email:o.value},await(await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(s),headers:{"Content-type":"application/json; charset=UTF-8"}})).json()&&alert("Form submitted successfully!"),resetFormInputClasses(t,o,a),e.reset(),!0)}finally{isSubmitting=!1}}}function setErrorInputClass(e){e.classList.add("feedback","feedback--error"),e.classList.remove("feedback--success")}function setSuccessInputClass(e){e.classList.add("feedback","feedback--success"),e.classList.remove("feedback--error")}function isEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function resetFormInputClasses(e,t,o){e.classList.remove("feedback","feedback--error","feedback--success"),t.classList.remove("feedback","feedback--error","feedback--success"),o.classList.remove("feedback","feedback--error","feedback--success")}function validateForm(e,t,o){let a=!0;var s=e.value.trim().length;return(s<2||100<s?(a=!1,setErrorInputClass):setSuccessInputClass)(e),(isEmail(t.value.trim())?setSuccessInputClass:(a=!1,setErrorInputClass))(t),(o.checked?setSuccessInputClass:(a=!1,setErrorInputClass))(o),a}function showModal(){isModalClosed||modalOverlay.classList.remove("disabled")}function hideModal(){modalOverlay.classList.add("disabled")}function closeModal(){hideModal(),localStorage.setItem("modalClosed","true"),isModalClosed=!0}function handleEscapeKey(e){"Escape"===e.key&&closeModal()}function handleClickOutside(e){e.target===modalOverlay&&closeModal()}setTimeout(showModal,5e3);